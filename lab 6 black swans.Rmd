---
title: "Lab 6 Black Swans"
author: "Erik Svenneby, Jorge Robelo, Mandy Karako, Ryan Bilkie, Thorbin Atwell"
date: "10/1/2019"
output: html_document
---

```{r}
library(tidyverse)
library(dplyr)
COflights <- read_csv("https://files.osf.io/v1/resources/3z5as4pej8/providers/osfstorage/5a8ca28f57103100104584db")
```
## Thorbin's Declaration: How does seasonal weather (month) affect the availibility of flights? 
```{r}
#code chunk#
COflights_month<-COflights %>%group_by(MONTH)%>%filter(ARR_DELAY!="NA") %>% summarise(total_flights=n())
#created tibble targeting all flights#
total_flights<-COflights_month$"total_flights"
#extracted number of flights per month as a 1x tibble# 
COflights_month_WD <-COflights %>% group_by(MONTH)%>% filter(WEATHER_DELAY!="NA",WEATHER_DELAY>0) %>% summarise(total_WD_flights=n())
total_WD_flights<-COflights_month_WD$"total_WD_flights"
#did the same thing as above but for weather delayed flights# 
useable_tibble<-tibble(month=1:12,'total weather delayed flights'=total_WD_flights,"total flights"=total_flights,g=(total_WD_flights/total_flights)*100)
#combined the 1x's and made a new tibble with just the variables I wanted with the respective conditional probabilities of having a delayed flight due to weather in the respective month #
```

```{r}
#plot chunk#
ggplot(data=useable_tibble,mapping=aes(x=month,y=g))+geom_col()+scale_x_continuous(breaks=1:12)+ylab("probability percentage of a flight being weather delayed")+ggtitle("probability of a flight from DIA being delayed due to weather by month in '17")
```
non-defaults used: scale_x_continuous(), title 

Thorbin's Analysis: 
  I was attempting to show that weather had a significant impact on a flights ability to fly out on time. To gather this data, I filtered the given data set for all flights that were initially at DIA (filtered out arrival times that were NA) and grouped the resulting data set by month. A similar method was used for flights specifically grounded/delayed due to weather delay. This was done by taking out all weather delays that evaluated to a numarical value of zero (including NA's), then grouped by month. Once both data frames were grouped by month, summary and n() were used to gather the total amount of flights that were at DIA per given month. The exact same method was applied to the weather delayed flights. These counts were then extracted with df$ which yielded two 1x tibbles which were then combined into a final 3x tibble. The resulting 3rd column was the conditional probability of flights being cancelled due to weather in each month of 2017. The conditions were specified as flights belonging to a certain month and flights that also belonged to that month being delayed by weather. It was found that months 1,2,7,8 and 12 (Jan,Feb,Jul,Aug,Dec) had the highest probability of being delayed by weather. The initial hypothesis was that these delays would be significantly more dominant in the winter months than they were shown to be. This was a bit surprising considering that generally there is no snow in July or August. This is possibly due to rather windy or possibly poor air quality days (the latter due to changes in air density). Also interesting was that for the months of March-June there were also rather high probabilities of flight delays due to weather. This could have been due to freak snow/wind storms that occured randomly which clearly would raise the weather delay probability for which ever month rouge storms occured in. Remaining are the months of September through November. These months show the lowest probability of having weather delays. As someone who has lived in Colorado their entire life, I can argue that these months have been observed by me to have generally the least severe incliment weather (at least in the plains). If this were true (neglecting rogue storms), then certainly these months at DIA would possess a lower percentage of flights delayed by weather, which in hindsight is what appears to have occurred. 
  
Thorbin's Conclusion:
  
  For 2017 it appears as though weather delays and month have a confounding relationship. My analysis confirmed a well documented observation that the weather tends to be more severely incliment in the winter months which certainly had an effect on the weather delays at DIA for 2017. 